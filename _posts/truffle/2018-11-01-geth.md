---
layout: post
title:  "gethæ­å»ºç§æœ‰é“¾"
categories: ä»¥å¤ªåŠ 
tags:  truffle ä»¥å¤ªåŠ åŒºå—é“¾ geth ç§æœ‰é“¾
author: zhengjunling

---

* content
{:toc}
# ä¸€ã€å®‰è£…geth



## 1. ä»€ä¹ˆæ˜¯gethï¼Ÿ

gethæ˜¯goç‰ˆæœ¬å®¢æˆ·ç«¯ï¼Œæ˜¯ç›®å‰ä¸»æµçš„é“¾æ¥ä»¥å¤ªåŠç½‘ç»œçš„å®¢æˆ·ç«¯ã€‚

ä¸åŒå¹³å°å‡æä¾›[ä¸‹è½½](https://ethfans.org/wikis/Home)

## 2. gethä½¿ç”¨

å‚æ•°ä»‹ç»//TODO

# äºŒã€ç½‘ç»œä»‹ç»

## 1. ä¸»ç½‘ç»œ

## 2. æµ‹è¯•ç½‘ç»œ

## 3. å¼€å‘ç½‘ç»œ

åœ¨Mistä¸­åˆ‡æ¢åˆ°ç§æœ‰ç½‘ç»œçš„æ—¶å€™ï¼Œ å°±æ˜¯ä¼šå¯åŠ¨è¿™ä¸ªæ¨¡å¼ï¼Œè¿™ä¸ªæ¨¡å¼æ˜¯ä¸´æ—¶çš„ï¼Œåˆ›å»ºçš„è´¦æˆ·å’Œåˆçº¦åœ¨å…³é—­Mistæ—¶ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„

## 4. ç§æœ‰ç½‘ç»œ

- è¿™ä¸ªæ˜¯ä½¿ç”¨åˆ›ä¸–æ–‡ä»¶genesis.jsonåˆ›å»ºçš„æœ¬åœ°ç½‘ç»œï¼Œåˆ›å»ºçš„è´¦æˆ·çœŸå®çš„å­˜å‚¨åˆ°æœ¬åœ°ï¼Œæ˜¯æœ¬æ–‡çš„é‡ç‚¹
- å‰ä¸‰ç½‘ç»œä¸Šçš„äº¤æ˜“éƒ½æ˜¯å…¬å…±å¯è§çš„ï¼Œæœ‰ä¸“é—¨çš„ç½‘ç»œæµè§ˆå™¨å¯ä»¥æŸ¥é˜…ã€‚
- ç§æœ‰ç½‘ç»œä¸Šçš„äº¤æ˜“è‹¥æƒ³æŸ¥çœ‹éœ€è¦è‡ªè¡Œå®‰è£…æµè§ˆå™¨ï¼Œä»“åº“å¦‚ä¸‹ï¼š

```sh
git clone https://github.com/etherparty/explorer
```

# ä¸‰ã€ç§æœ‰ç½‘ç»œæ­å»º

## 1. å‡†å¤‡åˆ›ä¸–æ–‡ä»¶ genesis.json

```json
{
 "alloc": {},
 "config": {
   "chainID": 72,
   "homesteadBlock": 0,
   "eip155Block": 0,
   "eip158Block": 0
 },
 "nonce": "0x0000000000000000",
 "difficulty": "0x4000",
 "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
 "coinbase": "0x0000000000000000000000000000000000000000",
 "timestamp": "0x00",
 "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
 "extraData": "0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa",
 "gasLimit": "0xffffffff"
}
```

## 2. åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŒ‡å®šä¸ºç§æœ‰ç½‘ç»œæ•°æ®å­˜å‚¨ä½ç½®

```
mkdir myPrivateNet
cd myPrivateNet
mv genesis.json ./      //<--è¿™ä¸ªgenesis.jsonæ”¾åˆ°è¿™é‡Œæ˜¯ä¾¿äºç®¡ç†ï¼Œä½ç½®ä¸é™ï¼Œèƒ½è®¿é—®å³å¯
```

## 3. åˆ›å»ºç§æœ‰é“¾

```
geth --datadir "./node1" init genesis.json
```

æ‰§è¡Œæ•ˆæœ

![carbon324](./images/carbon324.png)

## 4. å¯åŠ¨ç§æœ‰é“¾èŠ‚ç‚¹

```
geth --datadir "./node1" --networkid 72 --port 30301 console
```

- --datadir: æŒ‡å®šèŠ‚ç‚¹æ•°æ®å­˜å‚¨è·¯å¾„ï¼Œæ­¤å¤„ä¼šè‡ªåŠ¨åˆ›å»º `node1`ï¼Œä¹‹æ‰€ä»¥è¿™æ ·å‘½åï¼Œæ˜¯å› ä¸ºåé¢ä¼šåˆ›å»º`node2`ï¼Œä¾¿äºæ¨¡æ‹Ÿå¤šä¸ªèŠ‚ç‚¹äº¤äº’
- --networkid: å½“å‰ç½‘ç»œçš„idï¼Œå†™åœ¨genesis.jsonä¸­çš„
- --port ç«¯å£
- console: è¡¨æ˜åŒæ—¶å¯åŠ¨ä¸€ä¸ªäº¤äº’çš„ç»ˆç«¯(éå¿…è¦)

è¿™ä¸ªå…³é”®å­—å¯ä»¥çœç•¥ï¼Œçœç•¥çš„è¯è¡¨æ˜åªå¯åŠ¨èŠ‚ç‚¹æœåŠ¡ï¼Œä¸åˆ›å»ºäº¤äº’ç»ˆç«¯ï¼Œåé¢å¦‚æœæƒ³æ¥å…¥è¿™ä¸ªèŠ‚ç‚¹çš„è¯ï¼Œå¯ä»¥é€šè¿‡attachå‘½ä»¤æ¥å…¥ï¼Œåé¢è®²ã€‚ 
æ•ˆæœï¼š

![carbon12](/Users/zhengjunling/blog/Coder-zheng.github.io/_posts/truffle/images/carbon12.png)

1. å¦èµ·ä¸€ä¸ªç»ˆç«¯ï¼ŒæŸ¥çœ‹node1ä¸‹é¢çš„å†…å®¹

```shell
[duke ~/ethStudy/myPrivateNet]$ tree node1 -d
node1
â”œâ”€â”€ geth
â”‚   â”œâ”€â”€ chaindata
â”‚   â”œâ”€â”€ lightchaindata
â”‚   â””â”€â”€ nodes
â””â”€â”€ keystore

5 directories
```

è‡³æ­¤ï¼Œç§æœ‰ç½‘ç»œå·²æ­å»ºå®Œæˆï¼Œä¸‹é¢å¼€å§‹æ‰§è¡Œå„é¡¹å‘½ä»¤

# å››ã€ç§æœ‰é“¾åŸºæœ¬å‘½ä»¤

```shell
instance: Geth/v1.8.11-stable-dea1ce05/darwin-amd64/go1.10.3
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0
```

## 1. æŸ¥çœ‹å½“å‰ç½‘ç»œè´¦æˆ·

```
> eth.accounts
[]  <--å½“å‰ç½‘ç»œè´¦æˆ·ä¸ºç©º
>
```

æ³¨ï¼Œï¼Œæˆ‘ä»¬åœ¨åˆ›ä¸–å—ä¸­å¯ä»¥é¢„å…ˆæŒ‡å®šä¸€äº›è´¦æˆ·ï¼Œåœ¨allocå­—æ®µ

```shell
"alloc": {
      "7df9a875a174b3bc565e6424a0050ebc1b2d1d82": {
        "balance": "300000"
      },
      "f41c74c9ae680c1aa78f42e5647a62f353b7bdde": {
        "balance": "400000"
      }
}
```

## 2. åˆ›å»ºè´¦æˆ·

```shell
> 
> personal.newAccount("1111")
"0xe5c9766404eb3633163c85ef13e7a1f79cdee922"
> 
> 
> eth.accounts
["0xe5c9766404eb3633163c85ef13e7a1f79cdee922"]
>
```

å…¶ä¸­ï¼Œ"1111"æ˜¯è¿™ä¸ªè´¦æˆ·çš„å¯†ç 

## 3. å¤šåˆ›å»ºå‡ ä¸ªè´¦æˆ·ï¼Œå¹¶æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çŸ¿å·¥

```shell
> personal.newAccount("111")
"0x5032641c3f09bc8995a60c485b9ca4ac3d073fd8"
> personal.newAccount("111")
"0x864ced8aff4b883c99ab1c5156f2d51c47b25f8f"
> personal.newAccount("111")
"0xf3b1e1712a311443db772c55e12c9634912199ab"
> personal.newAccount("111")
"0xef89f85b7e276dcf738276df88888298cd9272ee"
>
> eth.coinbase
INFO [07-16|07:54:10] Etherbase automatically configured       address=0x5032641c3f09bc8995a60C485B9Ca4ac3d073fD8
"0x5032641c3f09bc8995a60c485b9ca4ac3d073fd8"
>
```

å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„çŸ¿å·¥æ˜¯ç¬¬ä¸€ä¸ªè´¦æˆ·ï¼Œå¯ä»¥é€šè¿‡eth.accountsæ¥æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰è´¦æˆ·ï¼Œä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„è´¦æˆ·å¯†ç éƒ½è®¾ç½®ä¸ºâ€1111â€œã€‚ 

æŸ¥çœ‹ä¸€ä¸‹keystoreç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°åˆ›å»ºäº†å››ä¸ªè´¦æˆ·æ–‡ä»¶

```shell
[duke ~/ethStudy/myPrivateNet]$ ls node1/keystore/
UTC--2018-07-15T23-52-31.825281356Z--5032641c3f09bc8995a60c485b9ca4ac3d073fd8
UTC--2018-07-15T23-53-42.431125900Z--864ced8aff4b883c99ab1c5156f2d51c47b25f8f
UTC--2018-07-15T23-53-44.166684858Z--f3b1e1712a311443db772c55e12c9634912199ab
UTC--2018-07-15T23-53-45.567447952Z--ef89f85b7e276dcf738276df88888298cd9272ee
[duke ~/ethStudy/myPrivateNet]$
```



## 4. æ‰‹åŠ¨ä¿®æ”¹æŒ–çŸ¿çš„è´¦æˆ·

```shell
> miner.setEtherbase(eth.accounts[1])
true
> eth.coinbase
"0x864ced8aff4b883c99ab1c5156f2d51c47b25f8f"
>
```

å¯ä»¥çœ‹åˆ°coinbaseçš„å€¼å·²ç»æ”¹å˜ï¼ŒæŒ–çŸ¿çš„æ—¶å€™ï¼Œå¥–åŠ±ä¼šå‘ç»™æŒ‡å®šçš„è´¦æˆ·ã€‚ 
==æ³¨ï¼Œæ¯æ¬¡èŠ‚ç‚¹é‡æ–°å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å°†coinbaseè®¾ç½®ä¸ºç¬¬ä¸€ä¸ªè´¦æˆ·ã€‚==

## 5. æŸ¥çœ‹è´¦æˆ·ä½™é¢

```shell
> eth.getBalance(eth.accounts[0])
0
> eth.getBalance(eth.accounts[1])
0
```

æ²¡æœ‰æŒ–çŸ¿ï¼Œä¹Ÿæ²¡æœ‰è½¬è´¦ï¼Œå½“å‰ä½™é¢å‡ä¸º0ã€‚ 

## 6. æŒ–çŸ¿

```
> miner.start()
```

æ‰§è¡Œæ•ˆæœï¼š

```shell
> miner.start()
INFO [07-16|07:56:48] Updated mining threads                   threads=0
INFO [07-16|07:56:48] Transaction pool price threshold updated price=18000000000
INFO [07-16|07:56:48] Starting mining operation 
null
> INFO [07-16|07:56:48] Commit new mining work                   number=1 txs=0 uncles=0 elapsed=166.057Âµs
INFO [07-16|07:56:50] Successfully sealed new block            number=1 hash=2a840câ€¦6e5118
INFO [07-16|07:56:50] ğŸ”¨ mined potential block                  number=1 hash=2a840câ€¦6e5118
INFO [07-16|07:56:50] Commit new mining work                   number=2 txs=0 uncles=0 elapsed=165.72Âµs
INFO [07-16|07:56:50] Successfully sealed new block            number=2 hash=f220e8â€¦ffef15
INFO [07-16|07:56:50] ğŸ”¨ mined potential block                  number=2 hash=f220e8â€¦ffef15
INFO [07-16|07:56:50] Commit new mining work                   number=3 txs=0 uncles=0 elapsed=133.196Âµs
```

æ‰§è¡Œåå¼€å§‹åˆ·å±ï¼Œåœæ­¢æŒ–çŸ¿

```
> miner.stop()
```

å†æ¬¡æŸ¥çœ‹ä½™é¢ 

```
> eth.getBalance(eth.coinbase)
65000000000000000000
> 
> eth.getBalance(eth.accounts[0])
0
>
```

å•ä½æ˜¯weiï¼ŒçŸ¿å·¥å¾—åˆ°å¥–åŠ±ï¼Œå…¶ä»–è´¦æˆ·ä¸ºé›¶ã€‚

å¯ä»¥ä½¿ç”¨web3æ¥å£ï¼Œå°†é‡‘é¢è¿›è¡Œè½¬æ¢æˆetherå•ä½ï¼Œæ¯ä¸ªå—å¥–åŠ±5ä¸ªetherï¼Œå…±13ä¸ªå—ï¼Œæ‰€ä»¥æ˜¯5 * 13 = 65ä¸ªå¥–åŠ±

```
> web3.fromWei(eth.getBalance(eth.coinbase), "ether")
65
> eth.blockNumber
13
>
```



## 7. æ£€æŸ¥èŠ‚ç‚¹

```
> admin.peers
[]
>
```

å½“å‰ç½‘ç»œä»…ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿”å›ç©º 

## 8. åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹

æ­¥éª¤åŒä¸Š 

```
geth --datadir "./node2" init genesis.json
geth --datadir "./node2" --networkid 72 --port 30302
```

æ³¨æ„ï¼š

- ==initæ“ä½œåƒä¸‡ä¸è¦å¿˜è®°æ‰§è¡Œï¼Œç›´æ¥æ‰§è¡Œå¯åŠ¨ä¹Ÿä¼šæˆåŠŸè¿è¡Œï¼Œä½†æ˜¯åç»­æ·»åŠ èŠ‚ç‚¹ç­‰æ€»æ˜¯å¤±è´¥ï¼Œä¸€å®šè¦æ³¨æ„ï¼==

- ==æ­¤å¤„æˆ‘ä»¬åˆ›å»ºnode2ï¼Œportä¿®æ”¹ä¸º30302ï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®š consoleï¼Œè¿™æ˜¯ä¸ºäº†æ¼”ç¤ºattachå‘½ä»¤==

- ==ä¸¤ä¸ªèŠ‚ç‚¹æƒ³äº’è¿çš„è¯ï¼Œå¿…é¡»éƒ½æŒ‡å®š--networkid 72==


## 9. ä½¿ç”¨attachå‚æ•°ï¼Œåˆ›å»ºæ¥å…¥èŠ‚ç‚¹çš„æ§åˆ¶å°

```
geth attach ipc:note2/geth.ipc
```

æ‰§è¡Œæ•ˆæœï¼š

```
[duke ~/ethStudy/myPrivateNet]$ geth attach ipc:note2/geth.ipc 
Welcome to the Geth JavaScript console!

instance: Geth/v1.8.11-stable-dea1ce05/darwin-amd64/go1.10.3
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

>
```

æ­¤å¤„geth.ipcåœ¨node2ä¸‹é¢ï¼Œè¿™ä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œè‡ªåŠ¨ç”Ÿæˆï¼ŒèŠ‚ç‚¹åœæ­¢åè‡ªåŠ¨åˆ é™¤ã€‚

åœ¨node2ä¸­ï¼Œåˆ›å»ºæ–°è´¦æˆ·

```shell
> personal.newAccount("111")
"0x6cf4d0785589497d3b5fca83571097f5cd6df352"
>
> personal.newAccount("111")
"0x1757a2db3fd67f0724bffffc33428faa7e9552f7"
>
```

## 10. åœ¨node2ä¸­ï¼ŒæŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯

```
> admin.nodeInfo
```

æ‰§è¡Œç»“æœï¼š

```shell
> admin.nodeInfo
{
  enode: "enode://3e707df543403f724144c8d51656b1399c1b9d5ae1d50f5739e02ef06130f1a11fd02baa320552ce1e6f90a7f45f4e37b1caa4d0f45eefcc97606cc16c150197@192.168.1.65:30302",
  id: "3e707df543403f724144c8d51656b1399c1b9d5ae1d50f5739e02ef06130f1a11fd02baa320552ce1e6f90a7f45f4e37b1caa4d0f45eefcc97606cc16c150197",
  ip: "192.168.1.65",
  listenAddr: "[::]:30302",
  name: "Geth/v1.8.11-stable-dea1ce05/darwin-amd64/go1.10.3",
  ports: {
    discovery: 30302,
    listener: 30302
  },
  protocols: {
    eth: {
      config: {
        chainId: 72,
        eip150Hash: "0x0000000000000000000000000000000000000000000000000000000000000000",
        eip155Block: 0,
        eip158Block: 0,
        homesteadBlock: 0
      },
      difficulty: 1725312,
      genesis: "0x942f596f99dc8879b426b59080824662e1f97587353d087487fea0a0e2a2588a",
      head: "0x17fa69432921727241ea299ab7f12611e09bb5a8473e71f1250f89832661ed86",
      network: 72
    }
  }
}
>
```

encodeå­—æ®µèƒ½å”¯ä¸€æ ‡è¯†è¿™ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°node1ä¸­ã€‚

ä¹Ÿå¯ä»¥ç›´æ¥è·å–enodeå­—æ®µ

```js
> admin.nodeInfo.enode
"enode://3e707df543403f724144c8d51656b1399c1b9d5ae1d50f5739e02ef06130f1a11fd02baa320552ce1e6f90a7f45f4e37b1caa4d0f45eefcc97606cc16c150197@192.168.1.65:30302"
>
```

## 11. åœ¨node1ä¸­æ·»åŠ node2èŠ‚ç‚¹

åˆ‡æ¢åˆ°node1ç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š

```js
> admin.addPeer("enode://3e707df543403f724144c8d51656b1399c1b9d5ae1d50f5739e02ef06130f1a11fd02baa320552ce1e6f90a7f45f4e37b1caa4d0f45eefcc97606cc16c150197@192.168.1.65:30302")
```

æ·»åŠ åï¼ŒæŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ·»åŠ è¿›æ¥

```shell
> admin.peers

[{
    caps: ["eth/63"],
    id: "3e707df543403f724144c8d51656b1399c1b9d5ae1d50f5739e02ef06130f1a11fd02baa320552ce1e6f90a7f45f4e37b1caa4d0f45eefcc97606cc16c150197",
    name: "Geth/v1.8.11-stable-dea1ce05/darwin-amd64/go1.10.3",
    network: {
      inbound: false,
      localAddress: "192.168.0.107:57154",
      remoteAddress: "192.168.1.65:30302",
      static: true,
      trusted: false
    },
    protocols: {
      eth: {
        difficulty: 16384,
        head: "0x942f596f99dc8879b426b59080824662e1f97587353d087487fea0a0e2a2588a",
        version: 63
      }
    }
}]
>
```

## 12. å‘é€äº¤æ˜“

ç”±node1è´¦æˆ·å‘node2è´¦æˆ·å‘é€ä¸€ç¬”äº¤æ˜“

åœ¨node2ä¸­è·å–ç¬¬ä¸€ä¸ªè´¦æˆ·çš„åœ°å€ï¼Œè¯¥è´¦æˆ·å½“å‰ä½™é¢ä¸ºé›¶

```shell
> eth.accounts[0]
"0x6cf4d0785589497d3b5fca83571097f5cd6df352"
> eth.getBalance(eth.accounts[0])
0
```

åˆ‡æ¢å›node1ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

æŸ¥çœ‹node1ä¸­è´¦æˆ·ä½™é¢çŠ¶æ€ï¼š

```shell
> eth.getBalance(eth.accounts[0])
0
> eth.getBalance(eth.accounts[1])
65000000000000000000
```

æˆ‘ä»¬ä½¿ç”¨accounts[1]å‘node2çš„accounts[0]è½¬è´¦15ä¸ªether

```python
> eth.sendTransaction({from : eth.accounts[1], to: "0x6cf4d0785589497d3b5fca83571097f5cd6df352", value: web3.toWei(15, "ether")})
>
```

æ­¤æ—¶ä¼šæŠ¥é”™å¦‚ä¸‹

```
Error: authentication needed: password or unlock
    at web3.js:3143:20
    at web3.js:6347:15
    at web3.js:5081:36
    at <anonymous>:1:2
>
```

è¿™è¯´æ˜å½“å‰è´¦æˆ·è¢«é”å®šï¼Œéœ€è¦è§£é”åæ‰èƒ½å‘èµ·äº¤æ˜“ã€‚

## 13. è§£é”è¿™ä¸ªfromæŒ‡å®šçš„è´¦æˆ·

```python
> personal.unlockAccount(eth.accounts[1])
```

æ•ˆæœï¼š

```shell
> personal.unlockAccount(eth.accounts[1])
Unlock account 0x864ced8aff4b883c99ab1c5156f2d51c47b25f8f
Passphrase: 
true
>
```

é‡æ–°å‘é€äº¤æ˜“ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼Œäº¤æ˜“åˆ›å»ºæˆåŠŸï¼ŒåŒæ—¶è¿”å›äº¤æ˜“hash

```shell
> eth.sendTransaction({from : eth.accounts[1], to: "0x6cf4d0785589497d3b5fca83571097f5cd6df352", value: web3.toWei(15, "ether")})

INFO [07-16|08:38:58] Submitted transaction                    fullhash=0x1cd7f14436a088586d9bb75db6cadec08f4293d270b21c72b237605d4b921bea recipient=0x6cf4D0785589497D3B5fca83571097F5cD6dF352
"0x1cd7f14436a088586d9bb75db6cadec08f4293d270b21c72b237605d4b921bea"
>
```

## 14. æŸ¥çœ‹äº¤æ˜“çŠ¶æ€

äº¤æ˜“å‘é€åˆ°ç½‘ç»œä¸­åï¼Œéœ€è¦çŸ¿å·¥æ‰“åŒ…æ‰èƒ½å†™å…¥åŒºå—ï¼ŒæŸ¥çœ‹å½“å‰è¯¥äº¤æ˜“çš„çŠ¶æ€

```
>txpool.status
```

æ•ˆæœ

```shell
> txpool.status
{
  pending: 1,  //<--- ç­‰å¾…è¢«æ‰“åŒ…
  queued: 0
}
>
```

åœ¨node2ä¸­å¯åŠ¨æŒ–çŸ¿ï¼Œç„¶ååœæ­¢æŒ–çŸ¿ï¼Œåœ¨node1ä¸­é‡æ–°æŸ¥çœ‹

node2:

```
> miner.start()
null
> miner.stop()
true
>
```

ï¿¼ node1:

```shell
> INFO [07-16|08:41:44] Block synchronisation started 
INFO [07-16|08:41:44] Imported new chain segment               blocks=2 txs=1 mgas=0.021 elapsed=565.360ms mgasps=0.037 number=15 hash=b2be14â€¦d19460 cache=3.33kB
INFO [07-16|08:41:44] Imported new chain segment               blocks=1 txs=0 mgas=0.000 elapsed=4.209ms   mgasps=0.000 number=16 hash=752b6aâ€¦2164c9 cache=3.73kB
INFO [07-16|08:41:44] Mining too far in the future             wait=2s
INFO [07-16|08:41:47] Imported new chain segment               blocks=1 txs=0 mgas=0.000 elapsed=4.799ms   mgasps=0.000 number=17 hash=68b112â€¦82e15e cache=4.12kB
INFO [07-16|08:41:47] Imported new chain segment               blocks=1 txs=0 mgas=0.000 elapsed=4.190ms   mgasps=0.000 number=18 hash=9ca0f2â€¦2685c9 cache=4.51kB
INFO [07-16|08:41:47] Imported new chain segment               blocks=1 txs=0 mgas=0.000 elapsed=2.166ms   mgasps=0.000 number=19 hash=7376eaâ€¦8c9461 cache=4.90kB
INFO [07-16|08:41:47] Mining too far in the future             wait=2s
INFO [07-16|08:41:51] Imported new chain segment               blocks=1 txs=0 mgas=0.000 elapsed=4.604ms   mgasps=0.000 number=20 hash=35227eâ€¦9c2aa3 cache=5.29kB

> 
> txpool.status

{
  pending: 0,
  queued: 0
}
>
```

ï¿¼å¯ä»¥çœ‹åˆ°ï¼Œpendingæ•°ç›®å˜ä¸º0ï¼Œè¯´æ˜äº¤æ˜“å·²ç»è¢«æ‰“åŒ…åˆ°åŒºå—å†…ã€‚

æŸ¥çœ‹äº¤æ˜“åçš„é‡‘é¢ï¼Œ

node1ä¸­ï¼š

```
> eth.getBalance(eth.accounts[1])
49999622000000000000
>
```

node1 çš„ accounts[1]ï¿¼ è´¦æˆ·å˜ä¸º 65 - 15 - æ‰‹ç»­è´¹ = 49.99ï¼Œæ­£ç¡®

node2ä¸­ï¼š

```
> eth.getBalance(eth.accounts[0])
50000378000000000000

> web3.fromWei(eth.getBalance(eth.accounts[0]), "ether")
50.000378
>
```

æˆ‘ä»¬å‘ç°ï¼Œaccounts[0]çš„å€¼å¹¶é15ï¼Œä¸ºä½•ï¼Ÿ

åŸå› æ˜¯è¿™ä¸ªè´¦æˆ·ä¹Ÿæ˜¯coinbaseè´¦æˆ·ï¼Œåˆšåˆšå‚ä¸äº†æŒ–çŸ¿ï¼Œå¾—åˆ°äº†æŒ–çŸ¿çš„å¥–åŠ±

```
> eth.blockNumber
20
```

å½“å‰åŒºå—æ•°ä¸º20ï¼Œæœ‰13ä¸ªå—æ˜¯ä»node1èŠ‚ç‚¹åŒæ­¥è¿‡æ¥çš„ï¼Œåˆšåˆšæˆ‘ä»¬è¿è¡Œminer.start()ä¸€å…±äº§ç”Ÿäº†7ä¸ªåŒºå—ï¼Œ

æ¯ä¸ªåŒºå—å¥–åŠ±5ï¼Œ å…±å¾—åˆ°å¥–åŠ± 35etherï¼ŒåŠ ä¸Šè½¬è´¦è·å¾—çš„15ä¸ªï¼Œä¸º50ï¼Œå†åŠ ä¸Šæ‰‹ç»­è´¹ï¼Œæ‰€ä»¥æ€»æ•°ä¸º50.000378ã€‚

# äº”ã€Ethereumè¿æ¥ç§æœ‰é“¾

Ethereumé»˜è®¤å®‰è£…ç›®å½•

- Mac: ~/Library/Ethereum
- Linux: ~/.ethereum
- Windows: %APPDATA%\Ethereum

æˆ‘ä»¬å¯åŠ¨Ethereumå®¢æˆ·ç«¯ï¼Œæ­¤æ—¶è¿æ¥çš„æ˜¯æµ‹è¯•ç½‘ç»œï¼š

![img](http://pc5j2f2i1.bkt.clouddn.com/ropsten%E5%90%AF%E5%8A%A8.jpg)

æˆ‘ä»¬é€šè¿‡å‘½ä»¤è¡Œï¼ŒæŸ¥çœ‹å®ƒèµ·çš„èŠ‚ç‚¹å‘½ä»¤å¦‚ä¸‹ï¼šï¿¼

Ethereumå¯åŠ¨gethå‘½ä»¤ï¼š

MacæŸ¥çœ‹æ–¹å¼ :

```shell
ps -ef | grep geth
```

è¿”å›å¦‚ä¸‹ä¿¡æ¯ï¼š

```shell
/Users/duke/Library/Application Support/Mist/binaries/Geth/unpacked/geth --testnet --syncmode light --cache 1024 --ipcpath /Users/duke/Library/Ethereum/geth.ipc
```

WindowsæŸ¥çœ‹æ–¹å¼ï¼š

```shell
wmic process where caption="geth.exe" get caption,commandline /value
```

è¯·è‡ªè¡ŒæŸ¥çœ‹ã€‚

Ethereumå®¢æˆ·ç«¯æ¯æ¬¡éƒ½è¦æŒ‡å®šç‰¹å®šçš„geth.ipcï¼ŒæŒ‡å®š--testnet æ¥å’Œæµ‹è¯•ç½‘ç»œè¿æ¥ï¼Œ--testnetå‚æ•°å°±æ˜¯Ropstenç½‘ç»œã€‚

æˆ‘ä»¬å¯ä»¥äº‹å…ˆæ‹‰èµ·ä¸€ä¸ªgethæœåŠ¡ï¼Œå…¶ä¸­å°†å­˜å‚¨æ•°æ®å‚æ•°æŒ‡å®šä¸ºæˆ‘ä»¬çš„ç§æœ‰ç½‘ç»œï¼Œè¿™æ ·Miståœ¨å¯åŠ¨æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿æ¥åˆ°æˆ‘ä»¬çš„æœåŠ¡ï¼Œè€Œä¸ä¼šé‡æ–°èµ·æœåŠ¡ã€‚

Mac:

```shell
geth  --datadir ./node1  --ipcpath /Users/duke/Library/Ethereum/geth.ipc
```

Windowsçš„ipcæ˜¯å›ºå®šçš„ï¼š

```shell
geth  --datadir .\node1  --ipcpath \\.\pipe\geth.ipc
```

é‡æ–°æ‰“å¼€Etherueumé’±åŒ…ï¼Œç•Œé¢å¦‚ä¸‹ï¼š

![img](http://pc5j2f2i1.bkt.clouddn.com/image-20180720100638500.png)

åœ¨å‘½ä»¤è¡Œï¼Œæˆ‘ä»¬é€šè¿‡attachå»ºç«‹ä¸€ä¸ªç»ˆç«¯ï¼ŒæŸ¥çœ‹è´¦æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬å‘ç°ä¸å›¾å½¢ç•Œé¢ä¸€è‡´ã€‚

Mac:

```
geth attach ipc:/Users/duke/Library/Ethereum/geth.ipc
```

Windows :

```
geth attach ipc:\\.\pipe\geth.ipc
```

==ï¿¼æ³¨æ„ï¼Œæ­¤æ—¶çš„ipcåº”è¯¥ä½¿ç”¨ä¸Šé¢çš„geth.ipcï¼Œæ³¨æ„è·¯å¾„ï¼Œè¿™ä¸ªé’±åŒ…è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¹¶ä¸åœ¨æˆ‘ä»¬çš„node1ç›®å½•ä¸‹é¢ã€‚==

æ‰§è¡Œ

```shell
> eth.accounts
["0x5032641c3f09bc8995a60c485b9ca4ac3d073fd8", "0x864ced8aff4b883c99ab1c5156f2d51c47b25f8f", "0xf3b1e1712a311443db772c55e12c9634912199ab", "0xef89f85b7e276dcf738276df88888298cd9272ee"]
>
```

è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ç§æœ‰é“¾çš„æ­å»º

æˆ‘ä»¬å­¦ä¼šå¦‚ä¸‹çŸ¥è¯†ç‚¹ï¼š

- äº†è§£gethæ­å»ºç§æœ‰é“¾
- ç†Ÿæ‚‰åŸºæœ¬çš„web3æ¥å£å‘½ä»¤
- ä½¿ç”¨Ethereumå®¢æˆ·ç«¯è¿æ¥åˆ°ç§æœ‰ç½‘ç»œ

